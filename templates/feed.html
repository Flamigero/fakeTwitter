{% extends 'base.html' %}

{% block head_content %}
<title>Feed</title>
{% endblock  %}

{% block container %}
<main>
    <aside class="settings">
        <ul>
            <li><i class="fab fa-twitter"></i></li>
            <li>
                <a href="{% url 'feed' %}">
                    <i class="fas fa-home"></i>
                    Home
                </a>
            </li>
            <li>
                <a href="">
                    <i class="fas fa-user-circle"></i>
                    Profile
                </a>
            </li>
            <li>
                <a href="{% url 'logout' %}">
                    <i class="fas fa-sign-out-alt"></i>
                    Exit
                </a>
            </li>
        </ul>
    </aside>
    <section class="feed">
        <h3>Home</h3>

        <article>
            <figure>
                <img src="{{ user.profile.picture.url }}" alt="" width="100%" height="100%">
            </figure>

            <form method="POST">
                {% csrf_token %}
                <input type="hidden" name="user" value="{{ user.pk }}" />
                <textarea name="text" id="text" placeholder="What's happening?" required></textarea>
                <input type="submit" value="FakeTweet">
            </form>
        </article>
        <ul>
            {% for tweet in tweets  %}
            <li>
                <figure>
                    {% if tweet.retweet != None %}
                    <img src="{{ tweet.retweet.user.profile.picture.url }}" alt="" width="100%" height="100%">
                    {% else %}
                    <img src="{{ tweet.user.profile.picture.url }}" alt="" width="100%" height="100%">
                    {% endif %}
                </figure>

                <div>
                    {% if tweet.retweet != None %}
                    <small>{{ tweet.user.username }} Retweeted</small>
                    {% endif %}
                    <h5>
                        {% if tweet.retweet != None %}
                        {{ tweet.retweet.user.first_name }}
                        <span>@{{ tweet.retweet.user.username }}</span> 
                        {% else %}
                        {{ tweet.user.first_name }}
                        <span>@{{ tweet.user.username }}</span> 
                        {% endif %}
                    </h5>
                    <p>{{ tweet.text }}</p>
                </div>
            </li>
            {% endfor %}
        </ul>
    </section>
    <aside class="trends"></aside>
</main>
{% endblock  %}